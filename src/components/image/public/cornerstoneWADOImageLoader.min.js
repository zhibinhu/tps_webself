(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r(require("dicom-parser"));else if(typeof define==="function"&&define.amd)define("cornerstoneWADOImageLoader",["dicom-parser"],r);else if(typeof exports==="object")exports["cornerstoneWADOImageLoader"]=r(require("dicom-parser"));else t["cornerstoneWADOImageLoader"]=r(t["dicomParser"])})(this,function(r){return function(r){var a={};function n(e){if(a[e]){return a[e].exports}var t=a[e]={i:e,l:false,exports:{}};r[e].call(t.exports,t,t.exports,n);t.l=true;return t.exports}n.m=r;n.c=a;n.d=function(e,t,r){if(!n.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})}};n.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};n.d(e,"a",e);return e};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=39)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.external=t.dicomParser=undefined;var a=r(46);var n=l(a);var u=r(47);var o=i(u);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}var f=void 0;var d={set cornerstone(e){f=e;(0,o.default)(f)},get cornerstone(){return f}};t.dicomParser=n;t.external=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.internal=t.xhrRequest=t.getOptions=t.setOptions=undefined;var a=r(50);var n=o(a);var u=r(6);function o(e){return e&&e.__esModule?e:{default:e}}var i={xhrRequest:n.default,setOptions:u.setOptions,getOptions:u.getOptions};t.setOptions=u.setOptions;t.getOptions=u.getOptions;t.xhrRequest=n.default;t.internal=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function a(e){var t=e[0];var r=e[0];var a=void 0;var n=e.length;for(var u=1;u<n;u++){a=e[u];t=Math.min(t,a);r=Math.max(r,a)}return{min:t,max:r}}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function a(e,t,r){t=t||0;if(!e){return r}if(!e.Value){return r}if(e.Value.length<=t){return r}return e.Value[t]}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function a(e){var t=e.indexOf(":");var r=e.substring(t+1);var a=r.indexOf("frame=");var n=void 0;if(a!==-1){var u=r.substr(a+6);n=parseInt(u,10);r=r.substr(0,a-1)}return{scheme:e.substr(0,t),url:r,frame:n}}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=[];function n(e,t){a[e]=t}function u(e){return a[e]}function o(e){a[e]=undefined}function i(){a=[]}t.default={add:n,get:u,remove:o,purge:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setOptions=n;t.getOptions=u;var a={beforeSend:function e(){},imageCreated:function e(){},strict:false};function n(e){a=e}function u(){return a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var a=r(24);var u=c(a);var o=r(25);var i=c(o);var l=r(28);var P=c(l);var f=r(29);var h=c(f);var d=r(2);var y=c(d);var s=r(30);var w=c(s);function c(e){return e&&e.__esModule?e:{default:e}}var _="";function D(e){return e!=="1.2.840.10008.5.1.4.1.1.12.1"&&e!=="1.2.840.10008.5.1.4.1.1.12.2.1"}function T(e){var t=(0,y.default)(e);var r=Math.abs(t.max-t.min);var a=65535;var n=r/a;var u=t.min;var o=e.length;var i=new Uint16Array(o);var l=65535;var f=0;for(var d=0;d<o;d++){var s=Math.floor((e[d]-u)/n);i[d]=s;l=Math.min(l,s);f=Math.max(f,s)}return{min:l,max:f,intPixelData:i,slope:n,intercept:u}}function O(e){if(e.bitsAllocated===32){e.pixelData=new Float32Array(e.pixelData)}else if(e.bitsAllocated===16){if(e.pixelRepresentation===0){e.pixelData=new Uint16Array(e.pixelData)}else{e.pixelData=new Int16Array(e.pixelData)}}else{e.pixelData=new Uint8Array(e.pixelData)}}function v(m,e,g,t){var b=n.external.cornerstone;var x=document.createElement("canvas");var r=(0,u.default)(m);var a=(0,i.default)(r,g,e,x,t);return new Promise(function(p,e){a.then(function(t){var e=b.metaData.get("imagePlaneModule",m)||{};var r=b.metaData.get("voiLutModule",m)||{};var a=b.metaData.get("modalityLutModule",m)||{};var n=b.metaData.get("sopCommonModule",m)||{};var u=(0,P.default)(t.photometricInterpretation);if(!(0,w.default)(t,g)){O(t);if(u){x.height=t.rows;x.width=t.columns;var o=x.getContext("2d");var i=o.createImageData(t.columns,t.rows);(0,h.default)(t,i);t.imageData=i;t.pixelData=i.data;var l=(0,y.default)(t.pixelData);t.smallestPixelValue=l.min;t.largestPixelValue=l.max}}var f={imageId:m,color:u,columnPixelSpacing:e.pixelSpacing?e.pixelSpacing[1]:undefined,columns:t.columns,height:t.rows,intercept:a.rescaleIntercept?a.rescaleIntercept:0,invert:t.photometricInterpretation==="MONOCHROME1",minPixelValue:t.smallestPixelValue,maxPixelValue:t.largestPixelValue,render:undefined,rowPixelSpacing:e.pixelSpacing?e.pixelSpacing[0]:undefined,rows:t.rows,sizeInBytes:t.pixelData.length,slope:a.rescaleSlope?a.rescaleSlope:1,width:t.columns,windowCenter:r.windowCenter?r.windowCenter[0]:undefined,windowWidth:r.windowWidth?r.windowWidth[0]:undefined,decodeTimeInMS:t.decodeTimeInMS,floatPixelData:undefined};if(t.pixelData instanceof Float32Array){var d=t.pixelData;var s=T(d);f.minPixelValue=s.min;f.maxPixelValue=s.max;f.slope=s.slope;f.intercept=s.intercept;f.floatPixelData=d;f.getPixelData=function(){return s.intPixelData}}else{f.getPixelData=function(){return t.pixelData}}if(f.color){f.render=b.renderColorImage;f.getCanvas=function(){if(_===m){return x}x.height=f.rows;x.width=f.columns;var e=x.getContext("2d");e.putImageData(t.imageData,0,0);_=m;return x}}else{f.render=b.renderGrayscaleImage}if(a.modalityLUTSequence&&a.modalityLUTSequence.length>0&&D(n.sopClassUID)){f.modalityLUT=a.modalityLUTSequence[0]}if(r.voiLUTSequence&&r.voiLUTSequence.length>0){f.voiLUT=r.voiLUTSequence[0]}if(f.color){f.windowWidth=255;f.windowCenter=127}if(f.windowCenter===undefined||f.windowWidth===undefined){var c=f.maxPixelValue*f.slope+f.intercept;var v=f.minPixelValue*f.slope+f.intercept;f.windowWidth=c-v;f.windowCenter=(c+v)/2}p(f)},e)})}t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getInfo=c;var l=r(0);var a=r(1);var f=0;var d={};var s={};function n(e){return d[e]!==undefined}function u(e){if(!d[e]){return}return d[e].dataSet}function o(u){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:a.xhrRequest;var t=arguments[2];var o=l.external.cornerstone;if(d[u]){return new Promise(function(e){d[u].cacheCount++;e(d[u].dataSet)})}if(s[u]){s[u].cacheCount++;return s[u]}var r=e(u,t);var i=new Promise(function(a,n){r.then(function(e){var t=new Uint8Array(e);var r=void 0;try{r=l.dicomParser.parseDicom(t)}catch(e){return n(e)}if(!(r.elements.x7fe00010||r.elements.x7fe00008)){return n("图像数据获取错误")}d[u]={dataSet:r,cacheCount:i.cacheCount};f+=r.byteArray.length;a(r);o.triggerEvent(o.events,"datasetscachechanged",{uri:u,action:"loaded",cacheInfo:c()})},n).then(function(){delete s[u]},function(){delete s[u]})});i.cacheCount=1;s[u]=i;return i}function i(e){var t=l.external.cornerstone;if(d[e]){d[e].cacheCount--;if(d[e].cacheCount===0){f-=d[e].dataSet.byteArray.length;delete d[e];t.triggerEvent(t.events,"datasetscachechanged",{uri:e,action:"unloaded",cacheInfo:c()})}}}function c(){return{cacheSizeInBytes:f,numberOfDataSetsCached:Object.keys(d).length}}function v(){d={};s={}}t.default={isLoaded:n,load:o,unload:i,getInfo:c,purge:v,get:u}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default="2.0.0"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(40);Object.defineProperty(t,"convertRGBColorByPixel",{enumerable:true,get:function e(){return l(a).default}});var n=r(41);Object.defineProperty(t,"convertRGBColorByPlane",{enumerable:true,get:function e(){return l(n).default}});var u=r(42);Object.defineProperty(t,"convertYBRFullByPixel",{enumerable:true,get:function e(){return l(u).default}});var o=r(43);Object.defineProperty(t,"convertYBRFullByPlane",{enumerable:true,get:function e(){return l(o).default}});var i=r(44);Object.defineProperty(t,"convertPALETTECOLOR",{enumerable:true,get:function e(){return l(i).default}});function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12);var n=r(8);var u=y(n);var o=r(31);var i=y(o);var l=r(32);var f=y(l);var d=r(33);var s=y(d);var c=r(35);var v=y(c);var p=r(36);var m=r(4);var g=y(m);var b=r(34);var x=y(b);var P=r(53);var h=y(P);function y(e){return e&&e.__esModule?e:{default:e}}var w={getImagePixelModule:a.getImagePixelModule,getLUTs:a.getLUTs,getModalityLUTOutputPixelRepresentation:a.getModalityLUTOutputPixelRepresentation,getNumberValues:a.getNumberValues,metaDataProvider:a.metaDataProvider};t.default={metaData:w,dataSetCacheManager:u.default,fileManager:i.default,getEncapsulatedImageFrame:f.default,getUncompressedImageFrame:s.default,loadFileRequest:v.default,loadImageFromPromise:p.loadImageFromPromise,getLoaderForScheme:p.getLoaderForScheme,loadImage:p.loadImage,parseImageId:g.default,unpackBinaryFrame:x.default,register:h.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(13);Object.defineProperty(t,"getImagePixelModule",{enumerable:true,get:function e(){return l(a).default}});var n=r(14);Object.defineProperty(t,"getLUTs",{enumerable:true,get:function e(){return l(n).default}});var u=r(15);Object.defineProperty(t,"getModalityLUTOutputPixelRepresentation",{enumerable:true,get:function e(){return l(u).default}});var o=r(16);Object.defineProperty(t,"getNumberValues",{enumerable:true,get:function e(){return l(o).default}});var i=r(45);Object.defineProperty(t,"metaDataProvider",{enumerable:true,get:function e(){return l(i).default}});function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function u(e,t){if(!e.elements[t]||e.elements[t].length!==6){return}return[e.uint16(t,0),e.uint16(t,1),e.uint16(t,2)]}function o(e,t,r){var a=[];var n=e.elements[t];for(var u=0;u<r[0];u++){if(r[2]===16){a[u]=e.uint16(t,u)}else{a[u]=e.byteArray[u+n.dataOffset]}}return a}function a(e,t){t.redPaletteColorLookupTableDescriptor=u(e,"x00281101");t.greenPaletteColorLookupTableDescriptor=u(e,"x00281102");t.bluePaletteColorLookupTableDescriptor=u(e,"x00281103");if(t.redPaletteColorLookupTableDescriptor[0]===0){t.redPaletteColorLookupTableDescriptor[0]=65536;t.greenPaletteColorLookupTableDescriptor[0]=65536;t.bluePaletteColorLookupTableDescriptor[0]=65536}var r=t.redPaletteColorLookupTableDescriptor[0];var a=e.elements.x00281201;var n=a.length===r?8:16;if(t.redPaletteColorLookupTableDescriptor[2]!==n){t.redPaletteColorLookupTableDescriptor[2]=n;t.greenPaletteColorLookupTableDescriptor[2]=n;t.bluePaletteColorLookupTableDescriptor[2]=n}t.redPaletteColorLookupTableData=o(e,"x00281201",t.redPaletteColorLookupTableDescriptor);t.greenPaletteColorLookupTableData=o(e,"x00281202",t.greenPaletteColorLookupTableDescriptor);t.bluePaletteColorLookupTableData=o(e,"x00281203",t.bluePaletteColorLookupTableDescriptor)}function n(e,t){var r=e.uint16("x00280103");if(r===0){t.smallestPixelValue=e.uint16("x00280106");t.largestPixelValue=e.uint16("x00280107")}else{t.smallestPixelValue=e.int16("x00280106");t.largestPixelValue=e.int16("x00280107")}}function i(e){var t={samplesPerPixel:e.uint16("x00280002"),photometricInterpretation:e.string("x00280004"),rows:e.uint16("x00280010"),columns:e.uint16("x00280011"),bitsAllocated:e.uint16("x00280100"),bitsStored:e.uint16("x00280101"),highBit:e.uint16("x00280102"),pixelRepresentation:e.uint16("x00280103"),planarConfiguration:e.uint16("x00280006"),pixelAspectRatio:e.string("x00280034")};n(e,t);if(t.photometricInterpretation==="PALETTE COLOR"&&e.elements.x00281101){a(e,t)}return t}t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function o(e,t){var r=t.uint16("x00283002",0);if(r===0){r=65535}var a=0;if(e===0){a=t.uint16("x00283002",1)}else{a=t.int16("x00283002",1)}var n=t.uint16("x00283002",2);var u={id:"1",firstValueMapped:a,numBitsPerEntry:n,lut:[]};for(var o=0;o<r;o++){if(e===0){u.lut[o]=t.uint16("x00283006",o)}else{u.lut[o]=t.int16("x00283006",o)}}return u}function a(e,t){if(!t||!t.items.length){return}var r=[];for(var a=0;a<t.items.length;a++){var n=t.items[a].dataSet;var u=o(e,n);if(u){r.push(u)}}return r}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function o(e){var t=e.uint16("x00280103");var r=e.uint16("x00280101");if(t===0){return 0}return-1<<r-1}function a(e){var t=e.string("x00080016");if(t==="1.2.840.10008.5.1.4.1.1.2"||t==="1.2.840.10008.5.1.4.1.1.2.1"){return 1}var r=e.floatString("x00281052");var a=e.floatString("x00281053");if(r!==undefined&&a!==undefined){var n=o(e);var u=n*a+r;if(u<0){return 1}return 0}if(e.elements.x00283000&&e.elements.x00283000.length>0){return 0}return e.uint16("x00280103")}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function a(e,t,r){var a=[];var n=e.string(t);if(!n){return}var u=n.split("\\");if(r&&u.length<r){return}for(var o=0;o<u.length;o++){a.push(parseFloat(u[o]))}return a}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(18);var n=r(21);var u=p(n);var o=r(22);var i=p(o);var l=r(5);var f=p(l);var d=r(23);var s=p(d);var c=r(51);var v=p(c);function p(e){return e&&e.__esModule?e:{default:e}}var m={getNumberString:a.getNumberString,getNumberValue:a.getNumberValue,getNumberValues:a.getNumberValues,getValue:a.getValue,metaDataProvider:a.metaDataProvider};t.default={metaData:m,findIndexOfString:u.default,getPixelData:i.default,loadImage:s.default,metaDataManager:f.default,register:v.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(48);Object.defineProperty(t,"getNumberString",{enumerable:true,get:function e(){return l(a).default}});var n=r(19);Object.defineProperty(t,"getNumberValue",{enumerable:true,get:function e(){return l(n).default}});var u=r(20);Object.defineProperty(t,"getNumberValues",{enumerable:true,get:function e(){return l(u).default}});var o=r(3);Object.defineProperty(t,"getValue",{enumerable:true,get:function e(){return l(o).default}});var i=r(49);Object.defineProperty(t,"metaDataProvider",{enumerable:true,get:function e(){return l(i).default}});function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(3);var n=u(a);function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=(0,n.default)(e,t);if(r===undefined){return}return parseFloat(r)}t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function a(e,t){if(!e){return}if(!e.Value){return}if(t&&e.Value.length<t){return}var r=[];for(var a=0;a<e.Value.length;a++){r.push(parseFloat(e.Value[a]))}return r}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function u(e,t,r){if(r+e.length>t.length){return false}var a=r;for(var n=0;n<e.length;n++){if(e[n]!==t[a++]){return false}}return true}function o(e){var t=new Uint8Array(e.length);for(var r=0,a=e.length;r<a;r++){t[r]=e.charCodeAt(r)}return t}function a(e,t,r){r=r||0;var a=o(t);for(var n=r;n<e.length;n++){if(a[0]===e[n]){if(u(a,e,n)){return n}}}return-1}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var a=r(21);var s=u(a);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){for(var t=0;t<e.length;t++){if(e[t].substr(0,2)==="--"){return e[t]}}}function v(e){for(var t=0;t<e.length;t++){if(e[t].substr(0,13)==="Content-Type:"){return e[t].substr(13).trim()}}}function p(e,t,r){t=t||0;r=r||e.length-t;var a="";for(var n=t;n<t+r;n++){a+=String.fromCharCode(e[n])}return a}function o(t,r){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"application/octet-stream";var a={accept:e};return new Promise(function(f,d){var e=(0,n.xhrRequest)(t,r,a);e.then(function(e){var t=new Uint8Array(e);var r=(0,s.default)(t,"\r\n\r\n");if(r===-1){d(new Error("invalid response - no multipart mime header"))}var a=p(t,0,r);var n=a.split("\r\n");var u=c(n);if(!u){d(new Error("invalid response - no boundary marker"))}var o=r+4;var i=(0,s.default)(t,u,o);if(i===-1){d(new Error("invalid response - terminating boundary not found"))}var l=i-o-2;f({contentType:v(n),imageFrame:{pixelData:new Uint8Array(e,o,l)}})})})}t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(5);var f=o(a);var n=r(22);var d=o(n);var u=r(7);var s=o(u);function o(e){return e&&e.__esModule?e:{default:e}}function c(){return"1.2.840.10008.1.2"}function i(o,i){var l=(new Date).getTime();var a=o.substring(7);var e=new Promise(function(n,u){var e=f.default.get(o);if(e===undefined){var t=new Error("no metadata for imageId "+o);return u(t)}var r='multipart/related; type="application/octet-stream"';(0,d.default)(a,o,r).then(function(e){var t=c(e.contentType);var r=e.imageFrame.pixelData;var a=(0,s.default)(o,r,t,i);a.then(function(e){var t=(new Date).getTime();e.loadTimeInMS=t-l;n(e)},u)},u)});return{promise:e,cancelFn:undefined}}t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(0);function n(e){var t=a.external.cornerstone.metaData.get("imagePixelModule",e);return{samplesPerPixel:t.samplesPerPixel,photometricInterpretation:t.photometricInterpretation,planarConfiguration:t.planarConfiguration,rows:t.rows,columns:t.columns,bitsAllocated:t.bitsAllocated,bitsStored:t.bitsStored,pixelRepresentation:t.pixelRepresentation,smallestPixelValue:t.smallestPixelValue,largestPixelValue:t.largestPixelValue,redPaletteColorLookupTableDescriptor:t.redPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:t.greenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:t.bluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:t.redPaletteColorLookupTableData,greenPaletteColorLookupTableData:t.greenPaletteColorLookupTableData,bluePaletteColorLookupTableData:t.bluePaletteColorLookupTableData,pixelData:undefined}}t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(26);var o=i(a);var n=r(27);var u=i(n);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,a){var n=a.priority||undefined;var u=a.transferPixelData?[r.buffer]:undefined;return o.default.addTask("decodeTask",{imageFrame:e,transferSyntax:t,pixelData:r,options:a},n,u).promise}function f(e,t,r,a){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};if(t==="1.2.840.10008.1.2"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.1"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.2"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.1.99"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.5"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.4.50"){if(e.bitsAllocated===8&&(e.samplesPerPixel===3||e.samplesPerPixel===4)){return(0,u.default)(e,r,a)}return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.4.51"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.4.57"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.4.70"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.4.80"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.4.81"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.4.90"){return l(e,t,r,n)}else if(t==="1.2.840.10008.1.2.4.91"){return l(e,t,r,n)}throw new Error("No decoder for transfer syntax "+t)}t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(6);var l=0;var f=[];var n=[];var u=(0,a.getOptions)();var o={maxWebWorkers:navigator.hardwareConcurrency||1,startWebWorkersOnDemand:true,webWorkerPath:"./public/cornerstoneWADOImageLoaderWebWorker.min.js",webWorkerTaskPaths:[],taskConfiguration:{decodeTask:{loadCodecsOnStartup:true,initializeCodecsOnStartup:false,codecsPath:"./cornerstoneWADOImageLoaderCodecs.min.js",usePDFJS:false,strict:u.strict}}};var d=void 0;var i={maxWebWorkers:0,numWebWorkers:0,numTasksQueued:0,numTasksExecuting:0,numTasksCompleted:0,totalTaskTimeInMS:0,totalTimeDelayedInMS:0};function s(){if(!f.length){return}for(var e=0;e<n.length;e++){if(n[e].status==="ready"){n[e].status="busy";var t=f.shift();t.start=(new Date).getTime();var r=(new Date).getTime();i.totalTimeDelayedInMS+=r-t.added;n[e].task=t;n[e].worker.postMessage({taskType:t.taskType,workerIndex:e,data:t.data},t.transferList);i.numTasksExecuting++;return}}if(n.length<d.maxWebWorkers){v()}}function c(e){if(e.data.taskType==="initialize"){n[e.data.workerIndex].status="ready";s()}else{var t=n[e.data.workerIndex].task.start;n[e.data.workerIndex].task.deferred.resolve(e.data.result);n[e.data.workerIndex].task=undefined;i.numTasksExecuting--;n[e.data.workerIndex].status="ready";i.numTasksCompleted++;var r=(new Date).getTime();i.totalTaskTimeInMS+=r-t;s()}}function v(){if(n.length>=d.maxWebWorkers){return}var e=new Worker(d.webWorkerPath);n.push({worker:e,status:"initializing"});e.addEventListener("message",c);e.postMessage({taskType:"initialize",workerIndex:n.length-1,config:d})}function p(e){e=e||o;if(d){throw new Error("WebWorkerManager already initialized")}d=e;d.maxWebWorkers=d.maxWebWorkers||navigator.hardwareConcurrency||1;if(!d.startWebWorkersOnDemand){for(var t=0;t<d.maxWebWorkers;t++){v()}}}function m(e,t){d.webWorkerTaskPaths.push(e);if(t){d.taskConfiguration=Object.assign(d.taskConfiguration,t)}for(var r=0;r<n.length;r++){n[r].worker.postMessage({taskType:"loadWebWorkerTask",workerIndex:n.length-1,sourcePath:e,config:d})}}function g(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var a=arguments[3];if(!d){p()}var n={};var u=new Promise(function(e,t){n={resolve:e,reject:t}});var o=void 0;for(o=0;o<f.length;o++){if(f[o].priority<r){break}}var i=l++;f.splice(o,0,{taskId:i,taskType:e,status:"ready",added:(new Date).getTime(),data:t,deferred:n,priority:r,transferList:a});s();return{taskId:i,promise:u}}function b(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;for(var r=0;r<f.length;r++){if(f[r].taskId===e){var a=f.splice(r,1)[0];a.priority=t;for(r=0;r<f.length;r++){if(f[r].priority<t){break}}f.splice(r,0,a);return true}}return false}function x(e,t){for(var r=0;r<f.length;r++){if(f[r].taskId===e){var a=f.splice(r,1);a.deferred.reject(t);return true}}return false}function P(){i.maxWebWorkers=d.maxWebWorkers;i.numWebWorkers=n.length;i.numTasksQueued=f.length;return i}t.default={initialize:p,loadWebWorkerTask:m,addTask:g,getStatistics:P,setTaskPriority:b,cancelTask:x}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2);var f=n(a);function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return u(String.fromCharCode.apply(null,Array.prototype.slice.apply(new Uint8Array(e))))}function u(t){var r=void 0;try{return decodeURIComponent(escape(t))}catch(e){r=e;if(r instanceof URIError){return t}throw r}}function o(o,e,i){var l=(new Date).getTime();var r=new Blob([e],{type:"image/jpeg"});return new Promise(function(u,t){var e=new FileReader;if(e.readAsBinaryString===undefined){e.readAsArrayBuffer(r)}else{e.readAsBinaryString(r)}e.onload=function(){var n=new Image;n.onload=function(){i.height=n.height;i.width=n.width;o.rows=n.height;o.columns=n.width;var e=i.getContext("2d");e.drawImage(this,0,0);var t=e.getImageData(0,0,n.width,n.height);var r=(new Date).getTime();o.pixelData=t.data;o.imageData=t;o.decodeTimeInMS=r-l;var a=(0,f.default)(o.pixelData);o.smallestPixelValue=a.min;o.largestPixelValue=a.max;u(o)};n.onerror=function(e){t(e)};if(e.readAsBinaryString===undefined){n.src="data:image/jpeg;base64,"+window.btoa(d(e.result))}else{n.src="data:image/jpeg;base64,"+window.btoa(e.result)}};e.onerror=function(e){t(e)}})}t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){return e==="RGB"||e==="PALETTE COLOR"||e==="YBR_FULL"||e==="YBR_FULL_422"||e==="YBR_PARTIAL_422"||e==="YBR_PARTIAL_420"||e==="YBR_RCT"||e==="YBR_ICT"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=o;var a=r(10);function n(e,t){if(e.planarConfiguration===0){(0,a.convertRGBColorByPixel)(e.pixelData,t)}else{(0,a.convertRGBColorByPlane)(e.pixelData,t)}}function u(e,t){if(e.planarConfiguration===0){(0,a.convertYBRFullByPixel)(e.pixelData,t)}else{(0,a.convertYBRFullByPlane)(e.pixelData,t)}}function o(e,t){var r=t.data;if(e.photometricInterpretation==="RGB"){n(e,r)}else if(e.photometricInterpretation==="YBR_RCT"){n(e,r)}else if(e.photometricInterpretation==="YBR_ICT"){n(e,r)}else if(e.photometricInterpretation==="PALETTE COLOR"){(0,a.convertPALETTECOLOR)(e,r)}else if(e.photometricInterpretation==="YBR_FULL_422"){n(e,r)}else if(e.photometricInterpretation==="YBR_FULL"){u(e,r)}else{throw new Error("No color space conversion for photometric interpretation "+e.photometricInterpretation)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function a(e,t){t=t||e.transferSyntax;if(e.bitsAllocated===8&&t==="1.2.840.10008.1.2.4.50"&&(e.samplesPerPixel===3||e.samplesPerPixel===4)){return true}}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=[];var n={};function u(e,t){if(n[t]){var r=Number(n[t].split("dicomfile:")[1]);a[r]=e;return n[t]}else{var r=a.push(e);if(t){n[t]="dicomfile:"+(r-1)}return"dicomfile:"+(r-1)}}function o(e){return a[e]}function i(e){a[e]=undefined}function l(){a=[]}t.default={add:u,get:o,remove:i,purge:l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=u;var a=r(0);function n(e){var t=e.intString("x00280008");var r=e.elements.x7fe00010;return t!==r.fragments.length}function u(e,t){if(e.elements.x7fe00010&&e.elements.x7fe00010.basicOffsetTable.length){return a.dicomParser.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t)}if(n(e)){var r=a.dicomParser.createJPEGBasicOffsetTable(e,e.elements.x7fe00010);return a.dicomParser.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t,r)}return a.dicomParser.readEncapsulatedPixelDataFromFragments(e,e.elements.x7fe00010,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(34);var d=n(a);function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=e.elements.x7fe00010||e.elements.x7fe00008;var a=e.uint16("x00280100");var n=e.uint16("x00280010");var u=e.uint16("x00280011");var o=e.uint16("x00280002");var i=r.dataOffset;var l=n*u*o;var f=void 0;if(a===8){f=i+t*l;if(f>=e.byteArray.length){throw new Error("frame exceeds size of pixelData")}return new Uint8Array(e.byteArray.buffer,f,l)}else if(a===16){f=i+t*l*2;if(f>=e.byteArray.length){throw new Error("frame exceeds size of pixelData")}return new Uint8Array(e.byteArray.buffer,f,l*2)}else if(a===1){f=i+t*l*.125;if(f>=e.byteArray.length){throw new Error("frame exceeds size of pixelData")}return(0,d.default)(e.byteArray,f,l)}else if(a===32){f=i+t*l*4;if(f>=e.byteArray.length){throw new Error("frame exceeds size of pixelData")}return new Uint8Array(e.byteArray.buffer,f,l*4)}throw new Error("unsupported pixel format")}t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function l(e,t){return e&1<<t}function a(e,t,r){var a=new Uint8Array(r);for(var n=0;n<r;n++){var u=Math.floor(n/8);var o=e[u+t];var i=n%8;a[n]=l(o,i)?1:0}return a}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(4);var n=i(a);var u=r(31);var o=i(u);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=(0,n.default)(e);var r=parseInt(t.url,10);var a=o.default.get(r);return new Promise(function(r,e){var t=new FileReader;t.onload=function(e){var t=e.target.result;r(t)};t.onerror=e;t.readAsArrayBuffer(a)})}t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.loadImage=t.getLoaderForScheme=t.loadImageFromPromise=undefined;var a=r(7);var p=c(a);var n=r(4);var o=c(n);var u=r(8);var i=c(u);var l=r(35);var f=c(l);var d=r(52);var m=c(d);var s=r(1);function c(e){return e&&e.__esModule?e:{default:e}}function g(e,t){e.decache=function(){var e=(0,o.default)(t);i.default.unload(e.url)}}function v(e,i){var l=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var f=arguments[3];var d=arguments[4];var s=arguments[5];var c=(new Date).getTime();var v={cancelFn:undefined};v.promise=new Promise(function(u,o){e.then(function(r){var e=(0,m.default)(r,l);var t=r.string("x00020010");var a=(new Date).getTime();var n=(0,p.default)(i,e,t,d);g(v,i);n.then(function(e){e.data=r;e.sharedCacheKey=f;var t=(new Date).getTime();e.loadTimeInMS=a-c;e.totalTimeInMS=t-c;if(s!==undefined&&s.imageDoneCallback!==undefined){s.imageDoneCallback(e)}u(e)},function(e){o({error:e,dataSet:r})})},function(e){o({error:e})})});return v}function b(o,i){var l=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var f=arguments[3];var d=arguments[4];var s=(new Date).getTime();var e=new Promise(function(r,t){var a=(new Date).getTime();var e=void 0;try{var n=(0,m.default)(o,l);var u=o.string("x00020010");e=(0,p.default)(i,n,u,d)}catch(e){t({error:e,dataSet:o});return}e.then(function(e){e.data=o;e.sharedCacheKey=f;var t=(new Date).getTime();e.loadTimeInMS=a-s;e.totalTimeInMS=t-s;r(e)},t)});return{promise:e,cancelFn:undefined}}function x(e){if(e==="dicomweb"||e==="wadouri"){return s.xhrRequest}else if(e==="dicomfile"){return f.default}}function P(e,t){var r=(0,o.default)(e);var a=x(r.scheme);if(i.default.isLoaded(r.url)){var n=i.default.get(r.url,a,e);return b(n,e,r.frame,r.url,t)}var u=i.default.load(r.url,a,e);return v(u,e,r.frame,r.url,t)}t.loadImageFromPromise=v;t.getLoaderForScheme=x;t.loadImage=P},,,function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:true});var a=t(10);Object.keys(a).forEach(function(t){if(t==="default"||t==="__esModule")return;Object.defineProperty(r,t,{enumerable:true,get:function e(){return a[t]}})});var n=t(11);Object.defineProperty(r,"wadouri",{enumerable:true,get:function e(){return P(n).default}});var u=t(17);Object.defineProperty(r,"wadors",{enumerable:true,get:function e(){return P(u).default}});var o=t(54);Object.defineProperty(r,"configure",{enumerable:true,get:function e(){return P(o).default}});var i=t(29);Object.defineProperty(r,"convertColorSpace",{enumerable:true,get:function e(){return P(i).default}});var l=t(7);Object.defineProperty(r,"createImage",{enumerable:true,get:function e(){return P(l).default}});var f=t(25);Object.defineProperty(r,"decodeImageFrame",{enumerable:true,get:function e(){return P(f).default}});var d=t(27);Object.defineProperty(r,"decodeJPEGBaseline8BitColor",{enumerable:true,get:function e(){return P(d).default}});var s=t(24);Object.defineProperty(r,"getImageFrame",{enumerable:true,get:function e(){return P(s).default}});var c=t(2);Object.defineProperty(r,"getMinMax",{enumerable:true,get:function e(){return P(c).default}});var v=t(28);Object.defineProperty(r,"isColorImage",{enumerable:true,get:function e(){return P(v).default}});var p=t(30);Object.defineProperty(r,"isJPEGBaseline8BitColor",{enumerable:true,get:function e(){return P(p).default}});var m=t(26);Object.defineProperty(r,"webWorkerManager",{enumerable:true,get:function e(){return P(m).default}});var g=t(9);Object.defineProperty(r,"version",{enumerable:true,get:function e(){return P(g).default}});var b=t(1);Object.defineProperty(r,"internal",{enumerable:true,get:function e(){return b.internal}});var x=t(0);Object.defineProperty(r,"external",{enumerable:true,get:function e(){return x.external}});function P(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t){if(e===undefined){throw new Error("decodeRGB: rgbBuffer must not be undefined")}if(e.length%3!==0){throw new Error("decodeRGB: rgbBuffer length must be divisible by 3")}var r=e.length/3;var a=0;var n=0;for(var u=0;u<r;u++){t[n++]=e[a++];t[n++]=e[a++];t[n++]=e[a++];t[n++]=255}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t){if(e===undefined){throw new Error("decodeRGB: rgbBuffer must not be undefined")}if(e.length%3!==0){throw new Error("decodeRGB: rgbBuffer length must be divisible by 3")}var r=e.length/3;var a=0;var n=0;var u=r;var o=r*2;for(var i=0;i<r;i++){t[a++]=e[n++];t[a++]=e[u++];t[a++]=e[o++];t[a++]=255}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t){if(e===undefined){throw new Error("decodeRGB: ybrBuffer must not be undefined")}if(e.length%3!==0){throw new Error("decodeRGB: ybrBuffer length must be divisble by 3")}var r=e.length/3;var a=0;var n=0;for(var u=0;u<r;u++){var o=e[a++];var i=e[a++];var l=e[a++];t[n++]=o+1.402*(l-128);t[n++]=o-.34414*(i-128)-.71414*(l-128);t[n++]=o+1.772*(i-128);t[n++]=255}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t){if(e===undefined){throw new Error("decodeRGB: ybrBuffer must not be undefined")}if(e.length%3!==0){throw new Error("decodeRGB: ybrBuffer length must be divisble by 3")}var r=e.length/3;var a=0;var n=0;var u=r;var o=r*2;for(var i=0;i<r;i++){var l=e[n++];var f=e[u++];var d=e[o++];t[a++]=l+1.402*(d-128);t[a++]=l-.34414*(f-128)-.71414*(d-128);t[a++]=l+1.772*(f-128);t[a++]=255}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t){var r=e.columns*e.rows;var a=e.pixelData;var n=e.redPaletteColorLookupTableData;var u=e.greenPaletteColorLookupTableData;var o=e.bluePaletteColorLookupTableData;var i=e.redPaletteColorLookupTableData.length;var l=0;var f=0;var d=e.redPaletteColorLookupTableDescriptor[1];var s=e.redPaletteColorLookupTableDescriptor[2]===8?0:8;var c=b(n,s);var v=b(u,s);var p=b(o,s);for(var m=0;m<r;++m){var g=a[l++];if(g<d){g=0}else if(g>d+i-1){g=i-1}else{g-=d}t[f++]=c[g];t[f++]=v[g];t[f++]=p[g];t[f++]=255}};function b(e,t){var r=e.length;var a=new Uint8ClampedArray(r);for(var n=0;n<r;++n){a[n]=e[n]>>t}return a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var w=r(0);var a=r(16);var _=f(a);var n=r(4);var D=f(n);var u=r(8);var T=f(u);var o=r(13);var O=f(o);var i=r(14);var M=f(i);var l=r(15);var I=f(l);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=(0,D.default)(t);var a=T.default.get(r.url);if(!a){return}if(e==="generalSeriesModule"){return{modality:a.string("x00080060"),seriesInstanceUID:a.string("x0020000e"),seriesNumber:a.intString("x00200011"),studyInstanceUID:a.string("x0020000d"),seriesDate:w.dicomParser.parseDA(a.string("x00080021")),seriesTime:w.dicomParser.parseTM(a.string("x00080031")||"")}}if(e==="patientStudyModule"){return{patientAge:a.intString("x00101010"),patientSize:a.floatString("x00101020"),patientWeight:a.floatString("x00101030")}}if(e==="imagePlaneModule"){var n=(0,_.default)(a,"x00200037",6);var u=(0,_.default)(a,"x00200032",3);var o=(0,_.default)(a,"x00280030",2);var i=(0,_.default)(a,"x00181164",2);var l=a.floatString("x00181114");var f=a.floatString("x00181110");var d=a.floatString("x00181111");var s=NaN;var c=NaN;var v=[];var p=[];if(o){c=o[0];s=o[1]}else if(i){if(!l){l=d/f;if(l>=1e-5){c=i[0]/l;s=i[1]/l}else{p=[]}}else{c=i[0]/l;s=i[1]/l}}else{p=[]}p.push(c);p.push(s);var m=1;var g=1;g=c;m=s;var b=null;var x=null;if(n){b=[parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2])];x=[parseFloat(n[3]),parseFloat(n[4]),parseFloat(n[5])]}return{frameOfReferenceUID:a.string("x00200052"),rows:a.uint16("x00280010"),columns:a.uint16("x00280011"),imageOrientationPatient:n,rowCosines:b,columnCosines:x,imagePositionPatient:u,sliceThickness:a.floatString("x00180050"),sliceLocation:a.floatString("x00201041"),pixelSpacing:p,rowPixelSpacing:g,columnPixelSpacing:m}}if(e==="imagePixelModule"){return(0,O.default)(a)}if(e==="modalityLutModule"){return{rescaleIntercept:a.floatString("x00281052"),rescaleSlope:a.floatString("x00281053"),rescaleType:a.string("x00281054"),modalityLUTSequence:(0,M.default)(a.uint16("x00280103"),a.elements.x00283000)}}if(e==="voiLutModule"){var P=(0,I.default)(a);return{windowCenter:(0,_.default)(a,"x00281050",1),windowWidth:(0,_.default)(a,"x00281051",1),voiLUTSequence:(0,M.default)(P,a.elements.x00283010)}}if(e==="sopCommonModule"){return{sopClassUID:a.string("x00080016"),sopInstanceUID:a.string("x00080018")}}if(e==="petIsotopeModule"){var h=a.elements.x00540016;if(h===undefined){return}var y=h.items[0].dataSet;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:w.dicomParser.parseTM(y.string("x00181072")||""),radionuclideTotalDose:y.floatString("x00181074"),radionuclideHalfLife:y.floatString("x00181075")}}}}t.default=d},function(e,t){e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(17);var n=i(a);var u=r(11);var o=i(u);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){n.default.register(e);o.default.register(e)}t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(3);var n=u(a);function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var a=(0,n.default)(e,t,r);if(a===undefined){return}return parseFloat(a)}t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var s=r(0);var a=r(20);var c=i(a);var n=r(3);var v=i(n);var u=r(19);var p=i(u);var o=r(5);var m=i(o);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=m.default.get(t);if(!r){return}if(e==="generalSeriesModule"){return{modality:(0,v.default)(r["00080060"]),seriesInstanceUID:(0,v.default)(r["0020000e"]),seriesNumber:(0,p.default)(r["00200011"]),studyInstanceUID:(0,v.default)(r["0020000d"]),seriesDate:s.dicomParser.parseDA((0,v.default)(r["00080021"])),seriesTime:s.dicomParser.parseTM((0,v.default)(r["00080031"],0,""))}}if(e==="patientStudyModule"){return{patientAge:(0,p.default)(r["00101010"]),patientSize:(0,p.default)(r["00101020"]),patientWeight:(0,p.default)(r["00101030"])}}if(e==="imagePlaneModule"){var a=(0,c.default)(r["00200037"],6);var n=(0,c.default)(r["00200032"],3);var u=(0,c.default)(r["00280030"],2);var o=1;var i=1;if(u){i=u[0];o=u[1]}var l=null;var f=null;if(a){l=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])];f=[parseFloat(a[3]),parseFloat(a[4]),parseFloat(a[5])]}return{frameOfReferenceUID:(0,v.default)(r["00200052"]),rows:(0,p.default)(r["00280010"]),columns:(0,p.default)(r["00280011"]),imageOrientationPatient:a,rowCosines:l,columnCosines:f,imagePositionPatient:n,sliceThickness:(0,p.default)(r["00180050"]),sliceLocation:(0,p.default)(r["00201041"]),pixelSpacing:u,rowPixelSpacing:i,columnPixelSpacing:o}}if(e==="imagePixelModule"){return{samplesPerPixel:(0,p.default)(r["00280002"]),photometricInterpretation:(0,v.default)(r["00280004"]),rows:(0,p.default)(r["00280010"]),columns:(0,p.default)(r["00280011"]),bitsAllocated:(0,p.default)(r["00280100"]),bitsStored:(0,p.default)(r["00280101"]),highBit:(0,v.default)(r["00280102"]),pixelRepresentation:(0,p.default)(r["00280103"]),planarConfiguration:(0,p.default)(r["00280006"]),pixelAspectRatio:(0,v.default)(r["00280034"]),smallestPixelValue:(0,p.default)(r["00280106"]),largestPixelValue:(0,p.default)(r["00280107"]),redPaletteColorLookupTableDescriptor:(0,c.default)(r["00281101"]),greenPaletteColorLookupTableDescriptor:(0,c.default)(r["00281102"]),bluePaletteColorLookupTableDescriptor:(0,c.default)(r["00281103"]),redPaletteColorLookupTableData:(0,c.default)(r["00281201"]),greenPaletteColorLookupTableData:(0,c.default)(r["00281202"]),bluePaletteColorLookupTableData:(0,c.default)(r["00281203"])}}if(e==="voiLutModule"){return{windowCenter:(0,c.default)(r["00281050"],1),windowWidth:(0,c.default)(r["00281051"],1)}}if(e==="modalityLutModule"){return{rescaleIntercept:(0,p.default)(r["00281052"]),rescaleSlope:(0,p.default)(r["00281053"]),rescaleType:(0,v.default)(r["00281054"])}}if(e==="sopCommonModule"){return{sopClassUID:(0,v.default)(r["00080016"]),sopInstanceUID:(0,v.default)(r["00080018"])}}if(e==="petIsotopeModule"){var d=(0,v.default)(r["00540016"]);if(d===undefined){return}return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:s.dicomParser.parseTM((0,v.default)(d["00181072"],0,"")),radionuclideTotalDose:(0,p.default)(d["00181074"]),radionuclideHalfLife:(0,p.default)(d["00181075"])}}}}t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(0);var d=r(6);function n(u,o){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var l=a.external.cornerstone;var f=(0,d.getOptions)();return new Promise(function(t,r){var a=new XMLHttpRequest;a.open("get",u,true);a.responseType="arraybuffer";f.beforeSend(a,o);Object.keys(n).forEach(function(e){a.setRequestHeader(e,n[e])});i.deferred={resolve:t,reject:r};i.url=u;i.imageId=o;a.onloadstart=function(e){if(f.onloadstart){f.onloadstart(e,i)}var t={url:u,imageId:o};l.triggerEvent(l.events,"cornerstoneimageloadstart",t)};a.onloadend=function(e){if(f.onloadend){f.onloadend(e,i)}var t={url:u,imageId:o};l.triggerEvent(l.events,"cornerstoneimageloadend",t)};a.onreadystatechange=function(e){if(f.onreadystatechange){f.onreadystatechange(e,i);return}if(a.readyState===4){if(a.status===200){t(a.response,a)}else{r(a)}}};a.onprogress=function(e){var t=e.loaded;var r=void 0;var a=void 0;if(e.lengthComputable){r=e.total;a=Math.round(t/r*100)}if(f.onprogress){f.onprogress(e,i)}var n={url:u,imageId:o,loaded:t,total:r,percentComplete:a};l.triggerEvent(l.events,"cornerstoneimageloadprogress",n)};a.send()})}t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){e.registerImageLoader("wadors",n.default);e.metaData.addProvider(u.metaDataProvider)};var a=r(23);var n=o(a);var u=r(18);function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(32);var n=i(a);var u=r(33);var o=i(u);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=e.elements.x7fe00010||e.elements.x7fe00008;if(!(e.elements.x7fe00010||e.elements.x7fe00008)){return undefined}if(r.encapsulatedPixelData){return(0,n.default)(e,t)}return(0,o.default)(e,t)}t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){e.registerImageLoader("dicomweb",a.loadImage);e.registerImageLoader("wadouri",a.loadImage);e.registerImageLoader("dicomfile",a.loadImage);e.metaData.addProvider(n.metaDataProvider)};var a=r(36);var n=r(12)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(1);function n(e){(0,a.setOptions)(e)}t.default=n}])});