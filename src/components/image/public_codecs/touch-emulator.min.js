(function(s,u,e,f){"use strict";var o=false;var c;var a;var d={};if(!u.createTouch){u.createTouch=function(e,t,n,r,i,o,u,c,a){if(c==f||a==f){c=r-s.pageXOffset;a=i-s.pageYOffset}return new h(t,n,{pageX:r,pageY:i,screenX:o,screenY:u,clientX:c,clientY:a})}}if(!u.createTouchList){u.createTouchList=function(){var e=new l;for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}e.length=arguments.length;return e}}function h(e,t,n,r,i){r=r||0;i=i||0;this.identifier=t;this.target=e;this.clientX=n.clientX+r;this.clientY=n.clientY+i;this.screenX=n.screenX+r;this.screenY=n.screenY+i;this.pageX=n.pageX+r;this.pageY=n.pageY+i}function l(){var e=[];e.item=function(e){return this[e]||null};e.identifiedTouch=function(e){return this[e+1]||null};return e}function t(){var e=[s,u.documentElement];var t=["ontouchstart","ontouchmove","ontouchcancel","ontouchend"];for(var n=0;n<e.length;n++){for(var r=0;r<t.length;r++){if(e[n]&&e[n][t[r]]==f){e[n][t[r]]=null}}}}function n(){return"ontouchstart"in s||s.Modernizr&&s.Modernizr.touch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>2}function r(e){e.preventDefault();e.stopPropagation()}function i(t){return function(e){r(e);if(e.which!==1){return}if(e.type=="mousedown"||!a||a&&!a.dispatchEvent){a=e.target}if(o&&!e.shiftKey){p("touchend",e);o=false}p(t,e);if(!o&&e.shiftKey){o=true;c={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY};p("touchstart",e)}if(e.type=="mouseup"){c=null;o=false;a=null}}}function p(e,t){var n=u.createEvent("Event");n.initEvent(e,true,true);n.altKey=t.altKey;n.ctrlKey=t.ctrlKey;n.metaKey=t.metaKey;n.shiftKey=t.shiftKey;n.touches=m(t,e);n.targetTouches=m(t,e);n.changedTouches=g(t,e);a.dispatchEvent(n)}function v(e){var t=new l;if(o){var n=E.multiTouchOffset;var r=c.pageX-e.pageX;var i=c.pageY-e.pageY;t.push(new h(a,1,c,r*-1-n,i*-1+n));t.push(new h(a,2,c,r+n,i-n))}else{t.push(new h(a,1,e,0,0))}return t}function m(e,t){if(e.type=="mouseup"){return new l}var n=v(e);if(o&&e.type!="mouseup"&&t=="touchend"){n.splice(1,1)}return n}function g(e,t){var n=v(e);if(o&&e.type!="mouseup"&&(t=="touchstart"||t=="touchend")){n.splice(0,1)}return n}function y(e){var t,n,r,i;for(n=0;n<e.touches.length;n++){t=e.touches[n];r=d[t.identifier];if(!r){r=d[t.identifier]=u.createElement("div");u.body.appendChild(r)}i=E.template(t);for(var o in i){r.style[o]=i[o]}}if(e.type=="touchend"||e.type=="touchcancel"){for(n=0;n<e.changedTouches.length;n++){t=e.changedTouches[n];r=d[t.identifier];if(r){r.parentNode.removeChild(r);delete d[t.identifier]}}}}function E(){if(n()){return}t();s.addEventListener("mousedown",i("touchstart"),true);s.addEventListener("mousemove",i("touchmove"),true);s.addEventListener("mouseup",i("touchend"),true);s.addEventListener("mouseenter",r,true);s.addEventListener("mouseleave",r,true);s.addEventListener("mouseout",r,true);s.addEventListener("mouseover",r,true);s.addEventListener("touchstart",y,false);s.addEventListener("touchmove",y,false);s.addEventListener("touchend",y,false);s.addEventListener("touchcancel",y,false)}E.multiTouchOffset=75;E.template=function(e){var t=30;var n="translate("+(e.clientX-t/2)+"px, "+(e.clientY-t/2)+"px)";return{position:"fixed",left:0,top:0,background:"#fff",border:"solid 1px #999",opacity:.6,borderRadius:"100%",height:t+"px",width:t+"px",padding:0,margin:0,display:"block",overflow:"hidden",pointerEvents:"none",webkitUserSelect:"none",mozUserSelect:"none",userSelect:"none",webkitTransform:n,mozTransform:n,transform:n}};if(typeof define=="function"&&define.amd){define(function(){return E})}else if(typeof module!="undefined"&&module.exports){module.exports=E}else{s[e]=E}})(window,document,"TouchEmulator");