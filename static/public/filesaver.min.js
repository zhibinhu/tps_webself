var saveAs=saveAs||typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(w){"use strict";if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var p=w.document,h=function(){return w.URL||w.webkitURL||w},n=w.URL||w.webkitURL||w,y=p.createElementNS("http://www.w3.org/1999/xhtml","a"),E=!w.externalHost&&"download"in y,e=function(e){var t=p.createEvent("MouseEvents");t.initMouseEvent("click",true,false,w,0,0,0,0,0,false,false,false,false,0,null);e.dispatchEvent(t)},m=w.webkitRequestFileSystem,g=w.requestFileSystem||m||w.mozRequestFileSystem,i=function(e){(w.setImmediate||w.setTimeout)(function(){throw e},0)},R="application/octet-stream",S=0,O=[],t=function(){var e=O.length;while(e--){var t=O[e];if(typeof t==="string"){n.revokeObjectURL(t)}else{t.remove()}}O.length=0},b=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e["on"+t[r]];if(typeof o==="function"){try{o.call(e,n||e)}catch(e){i(e)}}}},r=function(r,n){var o=this,e=r.type,t=false,i,a,f=function(){var e=h().createObjectURL(r);O.push(e);return e},s=function(){b(o,"writestart progress write writeend".split(" "))},l=function(){if(t||!i){i=f(r)}if(a){a.location.href=i}else{window.open(i,"_blank")}o.readyState=o.DONE;s()},u=function(e){return function(){if(o.readyState!==o.DONE){return e.apply(this,arguments)}}},c={create:true,exclusive:false},d;o.readyState=o.INIT;if(!n){n="download"}if(E){i=f(r);p=w.document;y=p.createElementNS("http://www.w3.org/1999/xhtml","a");y.href=i;y.download=n;var v=p.createEvent("MouseEvents");v.initMouseEvent("click",true,false,w,0,0,0,0,0,false,false,false,false,0,null);y.dispatchEvent(v);o.readyState=o.DONE;s();return}if(w.chrome&&e&&e!==R){d=r.slice||r.webkitSlice;r=d.call(r,0,r.size,R);t=true}if(m&&n!=="download"){n+=".download"}if(e===R||m){a=w}if(!g){l();return}S+=r.size;g(w.TEMPORARY,S,u(function(e){e.root.getDirectory("saved",c,u(function(e){var t=function(){e.getFile(n,c,u(function(n){n.createWriter(u(function(t){t.onwriteend=function(e){a.location.href=n.toURL();O.push(n);o.readyState=o.DONE;b(o,"writeend",e)};t.onerror=function(){var e=t.error;if(e.code!==e.ABORT_ERR){l()}};"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=o["on"+e]});t.write(r);o.abort=function(){t.abort();o.readyState=o.DONE};o.readyState=o.WRITING}),l)}),l)};e.getFile(n,{create:false},u(function(e){e.remove();t()}),u(function(e){if(e.code===e.NOT_FOUND_ERR){t()}else{l()}}))}),l)}),l)},o=r.prototype,a=function(e,t){return new r(e,t)};o.abort=function(){var e=this;e.readyState=e.DONE;b(e,"abort")};o.readyState=o.INIT=0;o.WRITING=1;o.DONE=2;o.error=o.onwritestart=o.onprogress=o.onwrite=o.onabort=o.onerror=o.onwriteend=null;w.addEventListener("unload",t,false);a.unload=function(){t();w.removeEventListener("unload",t,false)};return a}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined")module.exports=saveAs;